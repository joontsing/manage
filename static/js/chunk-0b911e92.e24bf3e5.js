(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b911e92"],{"085e":function(e,t,a){},"12fa":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"div-wrapper"},[o("el-row",{attrs:{gutter:e.cardSpacing}},[e._l(e.cardList,(function(t,i){return o("el-col",{key:i,attrs:{span:e.colSpan}},[o("el-card",{staticClass:"card",attrs:{"body-style":{padding:"0px"}}},[o("div",{staticClass:"content"},[o("div",{staticClass:"image-wrapper"},[o("img",{staticClass:"image",attrs:{src:a("2290")}}),o("div",[e._v("设备名称："),o("br"),e._v(e._s(t.device_name))])]),o("div",{staticClass:"button-wrapper"},[o("el-button",{staticClass:"button",on:{click:function(a){return e.handleButtonClick(t.device_id,0)}}},[e._v("删除设备")]),o("el-button",{staticClass:"button",on:{click:function(a){return e.handleButtonClick(t.device_id,1)}}},[e._v("修改密码")]),o("el-button",{staticClass:"button",on:{click:function(a){return e.handleButtonClick(t.device_id,2)}}},[e._v("打印机管理")])],1)])])],1)})),e.showAddCard?o("el-col",{attrs:{span:e.colSpan}},[o("el-card",{staticClass:"card",attrs:{"body-style":{padding:"0px"}}},[o("div",{staticClass:"content",on:{click:function(t){e.showDialog=!0}}},[o("div",{staticClass:"image-wrapper"},[o("img",{staticClass:"image",attrs:{src:"https://picss.sunbangyan.cn/2023/10/27/21d7c80bf8b96c182f4f327b9792e1da.png"}})]),o("div",{staticClass:"button-wrapper"},[o("el-button",{staticClass:"button",style:{fontSize:"16px"},attrs:{type:"text"},on:{click:function(t){e.showDialog=!0}}},[e._v("新建设备")])],1)])])],1):e._e()],2),o("el-dialog",{attrs:{visible:e.showDialog,title:"新建设备",width:"40%"},on:{"update:visible":function(t){e.showDialog=t},close:e.handleDialogClose}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"设备名称:",prop:"deviceName"}},[o("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.form.deviceName,callback:function(t){e.$set(e.form,"deviceName",t)},expression:"form.deviceName"}})],1),o("el-form-item",{attrs:{label:"设备账户:",prop:"account"}},[o("el-input",{attrs:{placeholder:"请输入设备账户"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),o("el-form-item",{attrs:{label:"设备密码:",prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入设备登陆密码",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),o("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPassword"}},[o("el-input",{attrs:{type:"password",placeholder:"请再次输入设备登陆密码",autocomplete:"off"},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addCard}},[e._v("保存")])],1)],1)],1)},i=[],s=(a("c740"),a("a434"),a("b775")),r=a("5f87");function c(){return Object(s["a"])({url:"/my/getDeviceInfo",method:"get",params:{token:Object(r["a"])()}})}function n(e){return Object(s["a"])({url:"/my/addDevice",method:"post",params:{token:Object(r["a"])()},data:e})}function l(e){return Object(s["a"])({url:"/my/deleteDevice",method:"post",params:{token:Object(r["a"])()},data:e})}var d={data:function(){return{cardList:[],showAddCard:!0,cardSpacing:10,colSpan:8,showDialog:!1,form:{deviceName:"",account:"",password:"",confirmPassword:""},rules:{deviceName:[{required:!0,message:"请输入设备名称",trigger:"blur"}],account:[{required:!0,message:"请输入设备账户",trigger:"blur"}],password:[{required:!0,message:"请输入设备密码",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入设备密码",trigger:"blur"},{validator:this.validateConfirmPassword,message:"密码不一致",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,c().then((function(t){e.cardList=t.data,console.log(t)}))},handleButtonClick:function(e,t){0===t?this.deleteDevice(e):1===t?this.manageDevice(e):2===t&&this.managePrinter(e)},deleteDevice:function(e){var t=this;console.log("Deleting device with ID ".concat(e));var a={device_id:e};confirm("确定要删除该设备吗？")&&l(a).then((function(a){if(console.log("删除结果",a),"0"===a.status){var o=t.cardList.findIndex((function(t){return t.device_id===e}));-1!==o&&t.cardList.splice(o,1)}}))},manageDevice:function(e){this.$router.push("/device/device?deviceId="+e)},managePrinter:function(e){console.log(this.cardList);for(var t=this.cardList,a="",o=0;o<t.length;o++)if(t[o].device_id===e){a=t[o].device_name;break}console.log(a),localStorage.setItem("deviceId",e),localStorage.setItem("deviceName",a),this.$router.push("/device/printer?deviceId="+e+"&deviceName="+a)},addCard:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.error("表单验证失败，请检查输入"),!1;var a={device_name:e.form.deviceName,account:e.form.account,password:e.form.password};n(a).then((function(t){console.log(t),a.device_id=t.data.insertId,e.cardList.push(a)})).catch((function(e){console.log(e)})),e.showDialog=!1}))},validateConfirmPassword:function(e,t,a){t!==this.form.password?a(new Error("两次输入的密码不一致")):a()},handleDialogClose:function(){this.form.deviceName="",this.form.account="",this.form.password="",this.form.confirmPassword=""}}},u=d,f=(a("c48a"),a("2877")),m=Object(f["a"])(u,o,i,!1,null,"010cd168",null);t["default"]=m.exports},2290:function(e,t,a){e.exports=a.p+"static/img/device.7aff5880.png"},c48a:function(e,t,a){"use strict";a("085e")}}]);